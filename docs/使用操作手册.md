# Docker-Shadowsocks代理服务使用操作手册

## 概述

本文档提供了在CI/CD部署完成后，如何在不同平台上安装和配置客户端以使用部署在服务器上的Shadowsocks代理服务，实现对Google等国际网站的访问。

## 服务基本信息

根据部署配置，您的代理服务信息如下：

- **服务器地址**: babyaward.top
- **服务器端口**: 8388
- **密码**: 部署时设置的密码（默认为your_password，请确保已修改）
- **加密方式**: aes-256-gcm（默认值，可在部署时修改）
- **支持协议**: TCP + UDP

## 密码设置说明

### 修改默认密码的重要性

默认密码"your_password"存在严重安全风险，所有访问代理服务的客户端都需要使用正确的密码进行连接。为确保服务安全，强烈建议在部署时修改为强密码。

#### 1. 在部署前修改环境变量（推荐）

通过GitHub Actions Variables设置密码：

1. 访问GitHub仓库 → Settings → Secrets and variables → Actions
2. 在Variables选项卡中添加或修改以下变量：
   - 变量名: `PASSWORD`
   - 变量值: 设置为您的强密码（建议包含大小写字母、数字和特殊字符，长度不少于12位）
3. 保存设置后，推送代码到main分支将触发自动部署，新密码将自动应用

#### 2. 部署后通过阿里云ECS修改

如果已部署完成，可通过以下步骤修改密码：

```bash
# 登录ECS实例
ssh -i your-key.pem root@babyaward.top

# 进入部署目录
cd /data/docker-proxy/prod

# 修改.env文件中的PASSWORD字段
vim .env
# 将PASSWORD=your_password修改为您的新密码

# 重启服务使配置生效
docker-compose down
docker-compose up -d
```

## Windows平台配置指南

### 1. 安装Shadowsocks-Windows

1. 访问 [Shadowsocks-Windows GitHub](https://github.com/shadowsocks/shadowsocks-windows)
2. 下载最新版本的zip包（如Shadowsocks-X.X.X.zip）
3. 解压到任意目录，运行Shadowsocks-Windows.exe

### 2. 配置Shadowsocks客户端

1. 右键点击任务栏中的Shadowsocks图标，选择「服务器」→「编辑服务器」
2. 点击「添加」按钮，填写以下信息：
   - 服务器IP/地址: babyaward.top
   - 服务器端口: 8388
   - 密码: 您设置的密码（非默认的your_password）
   - 加密方式: aes-256-gcm
   - 备注: 可以自定义，如「Docker-Proxy」
3. 点击「确定」保存配置

### 3. 启动代理服务

1. 右键点击任务栏中的Shadowsocks图标
2. 选择「启动系统代理」
3. 确保「开机启动」选项已勾选（可选）

### 4. 配置浏览器代理（以Chrome为例）

1. 打开Chrome浏览器
2. 建议安装「SwitchyOmega」扩展
3. 配置SwitchyOmega：
   - 新建情景模式，名称为「SS代理」
   - 代理协议选择「SOCKS5」
   - 代理服务器: 127.0.0.1
   - 代理端口: 1080（默认值）
   - 点击「应用选项」保存
4. 在Chrome扩展栏点击SwitchyOmega图标，选择「SS代理」即可通过代理访问网站

## Mac平台配置指南

### 1. 安装ShadowsocksX-NG

#### 方法一：使用Homebrew安装（推荐）

打开终端，执行以下命令：

```bash
# 安装Homebrew（如果尚未安装）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 安装ShadowsocksX-NG
brew install --cask shadowsocksx-ng
```

#### 方法二：直接下载安装包

1. 访问 [ShadowsocksX-NG GitHub](https://github.com/shadowsocks/ShadowsocksX-NG/releases)
2. 下载最新版本的.dmg安装包
3. 双击.dmg文件，将ShadowsocksX-NG拖入Applications文件夹
4. 打开应用程序，按照提示完成安装

### 2. 配置Shadowsocks客户端

1. 点击菜单栏中的Shadowsocks图标（地球形状），选择「服务器设置」
2. 点击「+」按钮，选择「手动添加」
3. 填写以下信息：
   - 服务器地址: babyaward.top
   - 服务器端口: 8388
   - 密码: 您设置的密码（非默认的your_password）
   - 加密方式: aes-256-gcm
   - 备注: 可以自定义，如「Docker-Proxy」
4. 点击「确定」保存配置

### 3. 启动代理服务

1. 点击菜单栏中的Shadowsocks图标
2. 确保「开启Shadowsocks」选项已勾选
3. 可选：设置系统代理模式：
   - 全局模式: 所有流量都通过代理
   - 自动模式: 根据规则自动选择是否使用代理
   - 不代理: 不使用代理

### 4. 配置浏览器代理（以Chrome为例）

1. 打开Chrome浏览器
2. 安装「SwitchyOmega」扩展
3. 配置SwitchyOmega：
   - 新建情景模式，名称为「SS代理」
   - 代理协议选择「SOCKS5」
   - 代理服务器: 127.0.0.1
   - 代理端口: 1086（ShadowsocksX-NG默认值）
   - 点击「应用选项」保存
4. 在Chrome扩展栏点击SwitchyOmega图标，选择「SS代理」即可通过代理访问网站

## Linux平台配置指南

### 1. 安装Shadowsocks-libev客户端

#### Ubuntu/Debian系统

```bash
# 安装Shadowsocks-libev
apt update
apt install shadowsocks-libev
```

#### CentOS系统

```bash
# 安装EPEL源
yum install epel-release

# 安装Shadowsocks-libev
yum install shadowsocks-libev
```

### 2. 启动代理

```bash
# 启动本地代理
ss-local -s babyaward.top -p 8388 -l 1080 -k "您的密码" -m aes-256-gcm

# 后台运行（可选）
ss-local -s babyaward.top -p 8388 -l 1080 -k "您的密码" -m aes-256-gcm -d start
```

## 移动平台配置指南

### Android平台

1. 从Google Play或其他渠道下载并安装「Shadowsocks」应用
2. 打开应用，点击「+」按钮添加配置
3. 填写服务器信息：
   - 服务器: babyaward.top
   - 端口: 8388
   - 密码: 您设置的密码
   - 加密: aes-256-gcm
4. 保存配置，点击连接按钮

### iOS平台

1. 从App Store下载并安装「Shadowrocket」或「Potatso Lite」应用
2. 打开应用，添加服务器配置：
   - 类型: Shadowsocks
   - 服务器: babyaward.top
   - 端口: 8388
   - 密码: 您设置的密码
   - 加密: aes-256-gcm
3. 保存配置，启动代理

## 使用验证

配置完成后，可以通过以下方式验证代理是否正常工作：

1. 打开浏览器，访问Google网站：https://www.google.com
2. 如果能够成功访问，说明代理配置正确
3. 也可以通过检测IP地址的网站（如https://www.whatismyip.com/）查看您的公网IP是否发生变化

## 常见问题解决

### 1. 连接失败

- 检查服务器地址和端口是否正确
- 确认密码和加密方式是否与服务器配置一致
- 验证服务器是否正常运行：可以通过阿里云控制台检查ECS实例状态

### 2. 连接成功但无法访问网站

- 检查本地防火墙设置，确保没有阻止代理连接
- 尝试更换不同的加密方式
- 重启Shadowsocks客户端

### 3. 连接速度慢

- 检查服务器带宽使用情况
- 尝试切换不同的网络环境
- 考虑增加服务器资源或使用更高效的加密方式

## 安全建议

1. **定期更换密码**: 建议每3个月更换一次密码
2. **使用强密码**: 确保密码包含大小写字母、数字和特殊字符
3. **限制访问来源**: 可以通过阿里云安全组设置，仅允许特定IP访问代理端口
4. **定期更新客户端**: 确保使用最新版本的Shadowsocks客户端以获取安全更新
5. **避免在公共WiFi使用代理**: 在不确定安全的网络环境下，建议谨慎使用代理服务

## 维护与更新

- 服务端更新将通过GitHub Actions自动部署
- 客户端应定期检查并更新到最新版本
- 如遇到无法解决的问题，请检查服务器日志获取更多信息：
  ```bash
  # 登录服务器查看日志
  ssh -i your-key.pem root@babyaward.top
  docker logs proxy-load-balancer
  docker logs shadowsocks-proxy
  ```